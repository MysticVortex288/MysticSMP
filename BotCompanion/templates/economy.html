{% extends 'base.html' %}

{% block title %}MysticSMP Bot - Economy Einstellungen{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h3 class="card-title mb-0">
                    <i class="fas fa-coins me-2 text-warning"></i> Economy Einstellungen
                </h3>
            </div>
            <div class="card-body">
                <ul class="nav nav-tabs" id="economyTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab" aria-controls="overview" aria-selected="true">Übersicht</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="work-tab" data-bs-toggle="tab" data-bs-target="#work" type="button" role="tab" aria-controls="work" aria-selected="false">Work</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="daily-tab" data-bs-toggle="tab" data-bs-target="#daily" type="button" role="tab" aria-controls="daily" aria-selected="false">Daily</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="beg-tab" data-bs-toggle="tab" data-bs-target="#beg" type="button" role="tab" aria-controls="beg" aria-selected="false">Beg</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="rob-tab" data-bs-toggle="tab" data-bs-target="#rob" type="button" role="tab" aria-controls="rob" aria-selected="false">Rob</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="pay-tab" data-bs-toggle="tab" data-bs-target="#pay" type="button" role="tab" aria-controls="pay" aria-selected="false">Pay</button>
                    </li>
                </ul>
                
                <div class="tab-content p-3 border border-top-0 rounded-bottom" id="economyTabContent">
                    <!-- Übersichts-Tab -->
                    <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview-tab">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="alert alert-info">
                                    <h5>Economy-System Übersicht</h5>
                                    <p>Hier kannst du alle Einstellungen des Economy-Systems anpassen. Wähle einen Tab aus, um spezifische Befehle zu konfigurieren.</p>
                                </div>
                                
                                <!-- Work-Befehl Zusammenfassung -->
                                <div class="card mb-3">
                                    <div class="card-header bg-light">
                                        <h5 class="mb-0"><i class="fas fa-briefcase me-2"></i> Work-Befehl</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <p><strong>Belohnungsbereich:</strong> 
                                                    {{ settings.get('work_min', 100) }}-{{ settings.get('work_max', 200) }} Credits
                                                </p>
                                            </div>
                                            <div class="col-md-6">
                                                <p><strong>Cooldown:</strong> 
                                                    {% set cooldown = settings.get('work_cooldown', 3600) %}
                                                    {% if cooldown >= 3600 %}
                                                        {{ cooldown // 3600 }} Stunde(n)
                                                    {% else %}
                                                        {{ cooldown // 60 }} Minute(n)
                                                    {% endif %}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Daily-Befehl Zusammenfassung -->
                                <div class="card mb-3">
                                    <div class="card-header bg-light">
                                        <h5 class="mb-0"><i class="fas fa-calendar-day me-2"></i> Daily-Befehl</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <p><strong>Grundbelohnung:</strong> 
                                                    {{ settings.get('daily_base', 200) }} Credits
                                                </p>
                                            </div>
                                            <div class="col-md-4">
                                                <p><strong>Streak-Bonus:</strong> 
                                                    {{ settings.get('daily_streak_bonus', 50) }} Credits pro Tag
                                                </p>
                                            </div>
                                            <div class="col-md-4">
                                                <p><strong>Max. Streak:</strong> 
                                                    {{ settings.get('daily_max_streak', 7) }} Tage
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Beg-Befehl Zusammenfassung -->
                                <div class="card mb-3">
                                    <div class="card-header bg-light">
                                        <h5 class="mb-0"><i class="fas fa-hand-holding me-2"></i> Beg-Befehl</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <p><strong>Erfolgsrate:</strong> 
                                                    {{ (settings.get('beg_chance', 0.7) * 100) | int }}%
                                                </p>
                                            </div>
                                            <div class="col-md-3">
                                                <p><strong>Belohnung:</strong> 
                                                    {{ settings.get('beg_min', 5) }}-{{ settings.get('beg_max', 25) }} Credits
                                                </p>
                                            </div>
                                            <div class="col-md-3">
                                                <p><strong>Misserfolgs-Strafe:</strong> 
                                                    {{ settings.get('beg_fail_loss', 0) }} Credits
                                                </p>
                                            </div>
                                            <div class="col-md-3">
                                                <p><strong>Cooldown:</strong> 
                                                    {% set cooldown = settings.get('beg_cooldown', 300) %}
                                                    {{ cooldown // 60 }} Minute(n)
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Rob-Befehl Zusammenfassung -->
                                <div class="card mb-3">
                                    <div class="card-header bg-light">
                                        <h5 class="mb-0"><i class="fas fa-mask me-2"></i> Rob-Befehl</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <p><strong>Erfolgsrate:</strong> 
                                                    {{ (settings.get('rob_chance', 0.5) * 100) | int }}%
                                                </p>
                                            </div>
                                            <div class="col-md-3">
                                                <p><strong>Diebesgut:</strong> 
                                                    {{ (settings.get('rob_min_percent', 0.1) * 100) | int }}-{{ (settings.get('rob_max_percent', 0.3) * 100) | int }}% vom Opfer
                                                </p>
                                            </div>
                                            <div class="col-md-3">
                                                <p><strong>Misserfolgs-Strafe:</strong> 
                                                    {{ settings.get('rob_fail_min', 50) }}-{{ settings.get('rob_fail_max', 100) }} Credits
                                                </p>
                                            </div>
                                            <div class="col-md-3">
                                                <p><strong>Cooldown:</strong> 
                                                    {% set cooldown = settings.get('rob_cooldown', 1800) %}
                                                    {% if cooldown >= 3600 %}
                                                        {{ cooldown // 3600 }} Stunde(n)
                                                    {% else %}
                                                        {{ cooldown // 60 }} Minute(n)
                                                    {% endif %}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Pay-Befehl Zusammenfassung -->
                                <div class="card mb-3">
                                    <div class="card-header bg-light">
                                        <h5 class="mb-0"><i class="fas fa-exchange-alt me-2"></i> Pay-Befehl</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <p><strong>Steuer:</strong> 
                                                    {{ (settings.get('pay_tax', 0.05) * 100) | int }}%
                                                </p>
                                            </div>
                                            <div class="col-md-6">
                                                <p><strong>Mindestbetrag:</strong> 
                                                    {{ settings.get('pay_min', 10) }} Credits
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Work-Tab -->
                    <div class="tab-pane fade" id="work" role="tabpanel" aria-labelledby="work-tab">
                        <h4 class="mb-4">Work-Befehl Einstellungen</h4>
                        <div class="row">
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="work_min" class="form-label">Minimale Belohnung</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="work_min" name="value" value="{{ settings.get('work_min', 100) }}" min="1" step="1">
                                            <input type="hidden" name="setting" value="work_min">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings work_min [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="work_max" class="form-label">Maximale Belohnung</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="work_max" name="value" value="{{ settings.get('work_max', 200) }}" min="1" step="1">
                                            <input type="hidden" name="setting" value="work_max">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings work_max [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="work_cooldown" class="form-label">Cooldown (in Sekunden)</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="work_cooldown" name="value" value="{{ settings.get('work_cooldown', 3600) }}" min="1" step="1">
                                            <input type="hidden" name="setting" value="work_cooldown">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings work_cooldown [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Daily-Tab -->
                    <div class="tab-pane fade" id="daily" role="tabpanel" aria-labelledby="daily-tab">
                        <h4 class="mb-4">Daily-Befehl Einstellungen</h4>
                        <div class="row">
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="daily_base" class="form-label">Grundbelohnung</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="daily_base" name="value" value="{{ settings.get('daily_base', 200) }}" min="1" step="1">
                                            <input type="hidden" name="setting" value="daily_base">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings daily_base [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="daily_streak_bonus" class="form-label">Streak-Bonus pro Tag</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="daily_streak_bonus" name="value" value="{{ settings.get('daily_streak_bonus', 50) }}" min="0" step="1">
                                            <input type="hidden" name="setting" value="daily_streak_bonus">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings daily_streak_bonus [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="daily_max_streak" class="form-label">Maximale Streak-Tage</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="daily_max_streak" name="value" value="{{ settings.get('daily_max_streak', 7) }}" min="1" step="1">
                                            <input type="hidden" name="setting" value="daily_max_streak">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings daily_max_streak [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="daily_cooldown" class="form-label">Cooldown (in Sekunden)</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="daily_cooldown" name="value" value="{{ settings.get('daily_cooldown', 86400) }}" min="1" step="1">
                                            <input type="hidden" name="setting" value="daily_cooldown">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings daily_cooldown [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Beg-Tab -->
                    <div class="tab-pane fade" id="beg" role="tabpanel" aria-labelledby="beg-tab">
                        <h4 class="mb-4">Beg-Befehl Einstellungen</h4>
                        <div class="row">
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="beg_chance" class="form-label">Erfolgsrate (0-1)</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="beg_chance" name="value" value="{{ settings.get('beg_chance', 0.7) }}" min="0" max="1" step="0.01">
                                            <input type="hidden" name="setting" value="beg_chance">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings beg_chance [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="beg_min" class="form-label">Minimale Belohnung</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="beg_min" name="value" value="{{ settings.get('beg_min', 5) }}" min="1" step="1">
                                            <input type="hidden" name="setting" value="beg_min">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings beg_min [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="beg_max" class="form-label">Maximale Belohnung</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="beg_max" name="value" value="{{ settings.get('beg_max', 25) }}" min="1" step="1">
                                            <input type="hidden" name="setting" value="beg_max">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings beg_max [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="beg_fail_loss" class="form-label">Verlust bei Misserfolg</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="beg_fail_loss" name="value" value="{{ settings.get('beg_fail_loss', 0) }}" min="0" step="1">
                                            <input type="hidden" name="setting" value="beg_fail_loss">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings beg_fail_loss [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="beg_cooldown" class="form-label">Cooldown (in Sekunden)</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="beg_cooldown" name="value" value="{{ settings.get('beg_cooldown', 300) }}" min="1" step="1">
                                            <input type="hidden" name="setting" value="beg_cooldown">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings beg_cooldown [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Rob-Tab -->
                    <div class="tab-pane fade" id="rob" role="tabpanel" aria-labelledby="rob-tab">
                        <h4 class="mb-4">Rob-Befehl Einstellungen</h4>
                        <div class="row">
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="rob_chance" class="form-label">Erfolgsrate (0-1)</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="rob_chance" name="value" value="{{ settings.get('rob_chance', 0.5) }}" min="0" max="1" step="0.01">
                                            <input type="hidden" name="setting" value="rob_chance">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings rob_chance [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="rob_min_percent" class="form-label">Min. Diebesgut-Prozentsatz (0-1)</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="rob_min_percent" name="value" value="{{ settings.get('rob_min_percent', 0.1) }}" min="0" max="1" step="0.01">
                                            <input type="hidden" name="setting" value="rob_min_percent">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings rob_min_percent [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="rob_max_percent" class="form-label">Max. Diebesgut-Prozentsatz (0-1)</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="rob_max_percent" name="value" value="{{ settings.get('rob_max_percent', 0.3) }}" min="0" max="1" step="0.01">
                                            <input type="hidden" name="setting" value="rob_max_percent">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings rob_max_percent [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="rob_fail_min" class="form-label">Min. Verlust bei Misserfolg</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="rob_fail_min" name="value" value="{{ settings.get('rob_fail_min', 50) }}" min="0" step="1">
                                            <input type="hidden" name="setting" value="rob_fail_min">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings rob_fail_min [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="rob_fail_max" class="form-label">Max. Verlust bei Misserfolg</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="rob_fail_max" name="value" value="{{ settings.get('rob_fail_max', 100) }}" min="0" step="1">
                                            <input type="hidden" name="setting" value="rob_fail_max">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings rob_fail_max [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="rob_cooldown" class="form-label">Cooldown (in Sekunden)</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="rob_cooldown" name="value" value="{{ settings.get('rob_cooldown', 1800) }}" min="1" step="1">
                                            <input type="hidden" name="setting" value="rob_cooldown">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings rob_cooldown [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pay-Tab -->
                    <div class="tab-pane fade" id="pay" role="tabpanel" aria-labelledby="pay-tab">
                        <h4 class="mb-4">Pay-Befehl Einstellungen</h4>
                        <div class="row">
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="pay_tax" class="form-label">Transaktionssteuer (0-1)</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="pay_tax" name="value" value="{{ settings.get('pay_tax', 0.05) }}" min="0" max="1" step="0.01">
                                            <input type="hidden" name="setting" value="pay_tax">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings pay_tax [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <form action="{{ url_for('update_economy') }}" method="post">
                                    <div class="mb-3">
                                        <label for="pay_min" class="form-label">Minimaler Überweisungsbetrag</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="pay_min" name="value" value="{{ settings.get('pay_min', 10) }}" min="1" step="1">
                                            <input type="hidden" name="setting" value="pay_min">
                                            <button class="btn btn-primary" type="submit">Speichern</button>
                                        </div>
                                        <div class="form-text">Befehl: <code>/economy_settings pay_min [Wert]</code></div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}